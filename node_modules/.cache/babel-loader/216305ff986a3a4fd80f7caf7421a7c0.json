{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\User\\\\Documents\\\\ecom\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _slicedToArray from\"C:\\\\Users\\\\User\\\\Documents\\\\ecom\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{CardElement,injectStripe}from'react-stripe-elements';import'./CheckoutForm.css';function CheckoutForm(_ref){var stripe=_ref.stripe,totalCost=_ref.totalCost;var _useState=useState('default'),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];var submit=function submit(e){var _ref2,token,response;return _regeneratorRuntime.async(function submit$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setStatus('submitting');_context.prev=2;_context.next=5;return _regeneratorRuntime.awrap(stripe.createToken({name:'Name'}));case 5:_ref2=_context.sent;token=_ref2.token;_context.next=9;return _regeneratorRuntime.awrap(fetch('/.netlify/functions/charge',{method:'POST',body:JSON.stringify({amount:totalCost*100,token:token.id})}));case 9:response=_context.sent;if(!response.ok){_context.next=14;break;}setStatus('complete');_context.next=15;break;case 14:throw new Error('Network response was not ok.');case 15:_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](2);setStatus('error');case 20:case\"end\":return _context.stop();}}},null,null,[[2,17]]);};if(status==='complete'){return React.createElement(\"div\",{className:\"CheckoutForm-complete\"},\"Payment successful!\");}return React.createElement(\"form\",{className:\"CheckoutForm\",onSubmit:submit},React.createElement(\"h4\",null,\"Would you like to complete the purchase?\"),React.createElement(CardElement,null),React.createElement(\"button\",{className:\"CheckoutForm-button\",type:\"submit\",disabled:status==='submitting'},status==='submitting'?'Submitting':'Submit Order'),status==='error'&&React.createElement(\"div\",{className:\"CheckoutForm-error\"},\"Something went wrong.\"));}export default injectStripe(CheckoutForm);","map":{"version":3,"sources":["C:/Users/User/Documents/ecom/src/components/CheckoutForm/CheckoutForm.js"],"names":["React","useState","CardElement","injectStripe","CheckoutForm","stripe","totalCost","status","setStatus","submit","e","preventDefault","createToken","name","token","fetch","method","body","JSON","stringify","amount","id","response","ok","Error"],"mappings":"mOAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,WAAT,CAAsBC,YAAtB,KAA0C,uBAA1C,CACA,MAAO,oBAAP,CAEA,QAASC,CAAAA,YAAT,MAA6C,IAArBC,CAAAA,MAAqB,MAArBA,MAAqB,CAAbC,SAAa,MAAbA,SAAa,eACfL,QAAQ,CAAC,SAAD,CADO,wCACpCM,MADoC,eAC5BC,SAD4B,eAG3C,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAAMC,CAAN,2IACbA,CAAC,CAACC,cAAF,GAEAH,SAAS,CAAC,YAAD,CAAT,CAHa,iEAMWH,MAAM,CAACO,WAAP,CAAmB,CAAEC,IAAI,CAAE,MAAR,CAAnB,CANX,6BAMLC,KANK,OAMLA,KANK,kDAQUC,KAAK,CAAC,4BAAD,CAA+B,CACvDC,MAAM,CAAE,MAD+C,CAEvDC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,MAAM,CAAEd,SAAS,CAAG,GADD,CAEnBQ,KAAK,CAAEA,KAAK,CAACO,EAFM,CAAf,CAFiD,CAA/B,CARf,SAQPC,QARO,mBAgBPA,QAAQ,CAACC,EAhBF,0BAiBTf,SAAS,CAAC,UAAD,CAAT,CAjBS,oCAmBH,IAAIgB,CAAAA,KAAJ,CAAU,8BAAV,CAnBG,0FAsBXhB,SAAS,CAAC,OAAD,CAAT,CAtBW,kEAAf,CA0BA,GAAID,MAAM,GAAK,UAAf,CAA2B,CACzB,MAAO,4BAAK,SAAS,CAAC,uBAAf,wBAAP,CACD,CAED,MACE,6BAAM,SAAS,CAAC,cAAhB,CAA+B,QAAQ,CAAEE,MAAzC,EACE,yEADF,CAEE,oBAAC,WAAD,MAFF,CAGE,8BACE,SAAS,CAAC,qBADZ,CAEE,IAAI,CAAC,QAFP,CAGE,QAAQ,CAAEF,MAAM,GAAK,YAHvB,EAKGA,MAAM,GAAK,YAAX,CAA0B,YAA1B,CAAyC,cAL5C,CAHF,CAUGA,MAAM,GAAK,OAAX,EACC,2BAAK,SAAS,CAAC,oBAAf,0BAXJ,CADF,CAgBD,CAED,cAAeJ,CAAAA,YAAY,CAACC,YAAD,CAA3B","sourcesContent":["import React, { useState } from 'react';\r\nimport { CardElement, injectStripe } from 'react-stripe-elements';\r\nimport './CheckoutForm.css';\r\n\r\nfunction CheckoutForm({ stripe, totalCost }) {\r\n  const [status, setStatus] = useState('default');\r\n\r\n  const submit = async e => {\r\n    e.preventDefault();\r\n\r\n    setStatus('submitting');\r\n\r\n    try {\r\n      let { token } = await stripe.createToken({ name: 'Name' });\r\n\r\n      let response = await fetch('/.netlify/functions/charge', {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n          amount: totalCost * 100,\r\n          token: token.id,\r\n        }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        setStatus('complete');\r\n      } else {\r\n        throw new Error('Network response was not ok.');\r\n      }\r\n    } catch (err) {\r\n      setStatus('error');\r\n    }\r\n  };\r\n\r\n  if (status === 'complete') {\r\n    return <div className=\"CheckoutForm-complete\">Payment successful!</div>;\r\n  }\r\n\r\n  return (\r\n    <form className=\"CheckoutForm\" onSubmit={submit}>\r\n      <h4>Would you like to complete the purchase?</h4>\r\n      <CardElement />\r\n      <button\r\n        className=\"CheckoutForm-button\"\r\n        type=\"submit\"\r\n        disabled={status === 'submitting'}\r\n      >\r\n        {status === 'submitting' ? 'Submitting' : 'Submit Order'}\r\n      </button>\r\n      {status === 'error' && (\r\n        <div className=\"CheckoutForm-error\">Something went wrong.</div>\r\n      )}\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default injectStripe(CheckoutForm);"]},"metadata":{},"sourceType":"module"}